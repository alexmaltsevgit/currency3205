var z=Object.defineProperty;var Q=(r,e,a)=>e in r?z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a;var f=(r,e,a)=>(Q(r,typeof e!="symbol"?e+"":e,a),a);import{j as t,G as I,P as g,a as i,B as l,T as p,c as T,u as U,b as V,r as d,C,F as D,I as E,d as F,e as x,A as H,L as $,f as K,R as J,g as v,h as O,i as b,t as X,p as k,s as Y,k as Z,l as _,m as ee,n as re,o as te}from"./vendor.685deea7.js";const ne=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}};ne();var u;(function(r){r.RUB="rub",r.EUR="eur",r.USD="usd"})(u||(u={}));const q=({name:r,value:e,wide:a})=>t(I,{item:!0,xs:12,md:a?12:6,children:t(g,{elevation:3,children:i(l,{px:5,py:15,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[t(p,{variant:"h2",children:r.toUpperCase()}),e&&i(p,{variant:"h4",mt:5,children:["Rate: ",e]})]})})}),ae=r=>{switch(r.split("-")[0]){case"ru":return u.RUB;case"en":return u.USD;default:return u.EUR}},M=r=>Object.values(u).includes(r),se={base:ae(navigator.language),rates:{}};var h;(function(r){r.ChangeBaseCurrency="changeBaseCurrency",r.ChangeSuccess="changeSuccess",r.ChangeError="changeError"})(h||(h={}));const P=T({name:"currency",initialState:se,reducers:{[h.ChangeBaseCurrency]:(r,e)=>{},[h.ChangeSuccess]:(r,e)=>{r.base=e.payload.base,r.rates=e.payload.rates},[h.ChangeError]:(r,e)=>{console.error(e.payload.error)}}}),ce=P.reducer,y=P.actions,oe=()=>{const r=U(n=>n.currency.base),e=U(n=>n.currency.rates),a=V(),o=d.exports.useCallback(n=>{const c=n.target.value;a(y.changeBaseCurrency({name:c}))},[a]),s=d.exports.useCallback(n=>{const c=n.target.value;c.length>3&&(n.target.value=c.slice(0,3))},[]);return d.exports.useEffect(()=>{a(y.changeBaseCurrency({name:r}))},[]),i(C,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",py:10},children:[i(D,{sx:{width:"100%",maxWidth:"500px",mb:7},children:[t(E,{htmlFor:"base-currency",children:"Base currency"}),t(F,{id:"base-currency",defaultValue:r,onBlur:o,onChange:s})]}),i(I,{container:!0,spacing:5,children:[t(q,{name:r||"Write base currency",wide:!0}),Object.values(u).map(n=>{var c;return n!==r&&t(q,{name:n,value:((c=e[n.toUpperCase()])==null?void 0:c.toFixed(2))||"???"},n)})]})]})},ie=r=>{const e=r.toLowerCase().split(" ");if(e.length!==4)return!1;const a=e[0],o=e[1],s=e[2],n=e[3];return s!=="in"||!M(o)||!M(n)?!1:{from:o,to:n,value:Number(a)}},w=class{constructor(e){f(this,"baseCurrency");f(this,"getRates",async()=>{const e=`${w.url}/${this.baseCurrency}`;return(await(await fetch(e)).json()).rates});this.baseCurrency=e}};let m=w;f(m,"url","https://open.er-api.com/v6/latest");const le=r=>r.charAt(0).toUpperCase()+r.slice(1),ue=()=>{const[r,e]=d.exports.useState("Submit query"),a=d.exports.useRef(null),o=d.exports.useCallback(async s=>{var L,j;s.preventDefault();const n=(j=(L=a.current)==null?void 0:L.value)!=null?j:"",c=ie(n);if(!c){e("Invalid query");return}e("Loading...");const{from:R,to:S,value:B}=c,N=(await new m(R).getRates())[S.toUpperCase()],G=(B*N).toFixed(2),W=`${B} ${R} in ${S} is ${G}`;e(le(W))},[]);return t(C,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",py:10},children:i(l,{children:[t(l,{children:t(g,{elevation:3,children:t(l,{py:10,px:7,children:t("form",{onSubmit:o,children:i(D,{sx:{width:"100%"},children:[t(E,{htmlFor:"currency-query",children:"Query"}),t(F,{id:"currency-query",inputRef:a,onSubmit:o}),t(x,{type:"submit",sx:{py:2,mt:2},children:"Submit"})]})})})})}),t(l,{mt:10,children:t(g,{elevation:3,children:t(l,{py:10,px:7,children:t(p,{variant:"h4",children:r})})})})]})})},de=()=>t(C,{sx:{pt:10,px:2},children:t(p,{variant:"h2",children:"Page 404"})}),pe=()=>i(H,{position:"static",sx:{display:"flex",flexWrap:"wrap",rowGap:2,flexDirection:"row",justifyContent:"space-between",alignItems:"center",px:6,py:2},children:[t(p,{variant:"h4",children:"3205 Currency"}),i(l,{children:[t(x,{component:$,to:"/converter",variant:"contained",sx:{mr:5},children:"Converter"}),t(x,{component:$,to:"/library",variant:"contained",children:"Library"})]})]});function he(){return i(K,{children:[t(pe,{}),i(J,{children:[t(v,{path:"/library",element:t(oe,{})}),t(v,{path:"/converter",element:t(ue,{})}),t(v,{path:"*",element:t(de,{})})]})]})}function*ye({payload:{name:r}}){try{const e=new m(r);let a=yield b(e.getRates.bind(e));a=a!=null?a:{},yield k(y.changeSuccess({base:r,rates:a}))}catch(e){yield k(y.changeError({error:e.message}))}}function*fe(){yield X(y.changeBaseCurrency.type,ye)}function*me(){yield O([b(fe)])}function*ge(){yield O([b(me)])}const A=Y(),Ce=[A],xe=Z({reducer:{currency:ce},middleware:Ce});A.run(ge);_.render(t(ee.StrictMode,{children:t(re,{store:xe,children:t(te,{children:t(he,{})})})}),document.getElementById("root"));
